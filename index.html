<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Theory of Change Authoring Tool</title>
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/accessibility.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header>
    <h1>Theory of Change Authoring Tool</h1>
    <p class="subtitle">Visualize and author your chain of logic</p>
    <nav class="view-toggle" aria-label="View mode">
      <button type="button"
              id="view-preview-btn"
              class="view-btn active"
              data-action="switch-to-preview"
              aria-pressed="true">
        <span aria-hidden="true">ğŸ”</span> Preview
      </button>
      <button type="button"
              id="view-edit-btn"
              class="view-btn"
              data-action="switch-to-edit"
              aria-pressed="false">
        <span aria-hidden="true">âœï¸</span> Edit
      </button>
    </nav>
  </header>

  <main id="main-content">
    <!-- Preview View (Default) -->
    <div id="preview-view" class="view-container active">
      <!-- Visualization Toggle -->
      <nav class="visualization-toggle" aria-label="Visualization type">
        <button type="button"
                id="view-text-btn"
                class="viz-btn active"
                data-action="switch-to-text"
                aria-pressed="true">
          <span aria-hidden="true">ğŸ“‹</span> Text View
        </button>
        <button type="button"
                id="view-diagram-btn"
                class="viz-btn"
                data-action="switch-to-diagram"
                aria-pressed="false">
          <span aria-hidden="true">ğŸ“Š</span> Diagram View
        </button>
      </nav>

      <!-- Text Preview content -->
      <div id="preview-content-container" class="viz-container active">
        <!-- Generated by preview.js -->
      </div>

      <!-- SVG Diagram content -->
      <div id="svg-visualization-container" class="viz-container">
        <!-- Generated by svgVisualizer.js -->
      </div>

      <section class="actions-section" aria-labelledby="preview-actions-heading">
        <h2 id="preview-actions-heading" class="sr-only">Import Actions</h2>
        <div class="import-options">
          <div class="import-group">
            <label for="import-url-input">Load from URL:</label>
            <div class="url-input-group">
              <input type="url"
                     id="import-url-input"
                     placeholder="Enter JSON URL (e.g., ./data.json or https://...)"
                     aria-describedby="url-hint">
              <button type="button"
                      id="import-url-btn"
                      class="action-btn"
                      data-action="import-url">
                Load
              </button>
            </div>
            <p id="url-hint" class="hint">Supports relative URLs (./file.json) or full URLs</p>
          </div>
          <div class="import-divider">
            <span>or</span>
          </div>
          <div class="import-group">
            <button type="button"
                    id="import-file-btn"
                    class="action-btn"
                    data-action="import-json">
              <span aria-hidden="true">ğŸ“¥</span> Import from File
            </button>
          </div>
        </div>
      </section>
    </div>

    <!-- Edit View -->
    <div id="edit-view" class="view-container">
      <!-- Impact Statement Section -->
      <section class="impact-section" aria-labelledby="impact-heading">
        <h2 id="impact-heading">Impact Statement</h2>
	<p class="section-description">
	  The following is a proposed description of an impact W3C wants to have on the world based on its existing vision and principles. It talks about the situation W3C's target beneficiaries ("people") would be in if W3C completely achieved that part of its vision.
	</p>
        <p id="impact-statement" class="impact-display">
          People around the world experience and enjoy a single, unified Web that works consistently across devices, browsers, and platforms, ensuring users can freely choose the tools they want to interact with the Web.
        </p>
      </section>

      <!-- Outcomes Section -->
      <section class="outcomes-section" aria-labelledby="outcomes-heading">
        <h2 id="outcomes-heading">Outcomes</h2>
        <div id="outcomes-container">
          <!-- Dynamically generated outcome cards will be inserted here -->
        </div>
        <button type="button"
                id="add-outcome-btn"
                class="add-btn primary-action"
                data-action="add-outcome">
          <span aria-hidden="true">+</span> Add Outcome
        </button>
      </section>

      <!-- Actions Section -->
      <section class="actions-section" aria-labelledby="edit-actions-heading">
        <h2 id="edit-actions-heading" class="sr-only">Actions</h2>
        <div class="button-group">
          <button type="button" id="save-btn" class="action-btn" data-action="save">
            <span aria-hidden="true">ğŸ’¾</span> Save Progress
          </button>
          <button type="button" id="export-json-btn" class="action-btn" data-action="export-json">
            <span aria-hidden="true">ğŸ“„</span> Export as JSON
          </button>
          <button type="button" id="export-markdown-btn" class="action-btn" data-action="export-markdown">
            <span aria-hidden="true">ğŸ“</span> Export as Markdown
          </button>
        </div>
        <div id="save-indicator" class="save-indicator" aria-live="polite" aria-atomic="true"></div>
      </section>
    </div>
  </main>

  <!-- Hidden file input for JSON import -->
  <input type="file"
         id="import-file-input"
         accept="application/json,.json"
         class="sr-only"
         aria-label="Select JSON file to import">

  <!-- Live region for screen reader announcements -->
  <div id="announcements"
       role="status"
       aria-live="polite"
       aria-atomic="true"
       class="sr-only">
  </div>

  <script type="module" src="js/app.js"></script>
</body>
</html>
